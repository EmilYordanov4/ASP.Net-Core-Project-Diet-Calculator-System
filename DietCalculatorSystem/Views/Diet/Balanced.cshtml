@model DietFormModel

@{
	ViewData["Title"] = "Balanced";
}

<h1 style="text-align:center; margin-bottom:2%">Balanced Diet</h1>

<body>
	<div class="row">
		<div class="col-lg-7 no-gutters text-box font-settings">
			<div>
				<h3 style="text-align:center; padding-top: 1%">Total</h3>
				<table class="table text-box">
					<thead class="thead-light">
						<tr style="text-align:center">
							<th style="color:black" scope="col">Calories</th>
							<th style="color:black" scope="col">Proteins</th>
							<th style="color:black" scope="col">Fats</th>
							<th style="color:black" scope="col">Carbs</th>
						</tr>
					</thead>
					<tbody>
						<tr style="text-align:center">
							<td>@Model.TotalCalories</td>
							<td>@Model.TotalProteins</td>
							<td>@Model.TotalFats</td>
							<td>@Model.TotalCarbohydrates</td>
						</tr>
				</table>
				<h3 style="text-align:center">Breakfast</h3>
				<table class="table text-box">
					<thead class="thead-light">
						<tr style="text-align:center">
							<th style="color:black" scope="col">Name</th>
							<th style="color:black" scope="col">Calories</th>
							<th style="color:black" scope="col">Proteins</th>
							<th style="color:black" scope="col">Fats</th>
							<th style="color:black" scope="col">Carbs</th>
							<th style="color:black" scope="col">Quantity</th>
							<th style="color:black" scope="col"></th>
						</tr>
					</thead>
					<tbody>
						@foreach (var food in @Model.BreakfastFoods)
						{
							<tr style="text-align:center">
								<td style="vertical-align:middle">@food.Name</td>
								<td style="vertical-align:middle">@food.Calories</td>
								<td style="vertical-align:middle">@food.Proteins</td>
								<td style="vertical-align:middle">@food.Fats</td>
								<td style="vertical-align:middle">@food.Carbohydrates</td>
								<td style="vertical-align:middle">@food.Quantity</td>
								<td style="vertical-align:middle">
									<a asp-controller="Diet" asp-action="RemoveBreakfast" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Balanced" class="btn btn-danger" style="color:black">X</a>
								</td>
							</tr>
						}
				</table>
				<h3 style="text-align:center">Lunch</h3>
				<table class="table text-box">
					<thead class="thead-light">
						<tr style="text-align:center">
							<th style="color:black" scope="col">Name</th>
							<th style="color:black" scope="col">Calories</th>
							<th style="color:black" scope="col">Proteins</th>
							<th style="color:black" scope="col">Fats</th>
							<th style="color:black" scope="col">Carbs</th>
							<th style="color:black" scope="col">Quantity</th>
							<th style="color:black" scope="col"></th>
						</tr>
					</thead>
					<tbody>
						@foreach (var food in @Model.LunchFoods)
						{
							<tr style="text-align:center">
								<td style="vertical-align:middle">@food.Name</td>
								<td style="vertical-align:middle">@food.Calories</td>
								<td style="vertical-align:middle">@food.Proteins</td>
								<td style="vertical-align:middle">@food.Fats</td>
								<td style="vertical-align:middle">@food.Carbohydrates</td>
								<td style="vertical-align:middle">@food.Quantity</td>
								<td style="vertical-align:middle">
									<a asp-controller="Diet" asp-action="RemoveLunch" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Balanced" class="btn btn-danger" style="color:black">X</a>
								</td>
							</tr>
						}
				</table>
				<h3 style="text-align:center">Dinner</h3>
				<table class="table text-box">
					<thead class="thead-light">
						<tr style="text-align:center">
							<th style="color:black" scope="col">Name</th>
							<th style="color:black" scope="col">Calories</th>
							<th style="color:black" scope="col">Proteins</th>
							<th style="color:black" scope="col">Fats</th>
							<th style="color:black" scope="col">Carbs</th>
							<th style="color:black" scope="col">Quantity</th>
							<th style="color:black" scope="col"></th>
						</tr>
					</thead>
					<tbody>
						@foreach (var food in @Model.DinnerFoods)
						{
							<tr style="text-align:center">
								<td style="vertical-align:middle">@food.Name</td>
								<td style="vertical-align:middle">@food.Calories</td>
								<td style="vertical-align:middle">@food.Proteins</td>
								<td style="vertical-align:middle">@food.Fats</td>
								<td style="vertical-align:middle">@food.Carbohydrates</td>
								<td style="vertical-align:middle">@food.Quantity</td>
								<td style="vertical-align:middle">
									<a asp-controller="Diet" asp-action="RemoveDinner" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Balanced" class="btn btn-danger" style="color:black">X</a>
								</td>
							</tr>
						}
				</table>
			</div>
		</div>
		<div class="col-lg-5 no-gutters">
			<div class="sidebar">
				<div>
					<form method="get">
						<div class="row" style="margin-bottom:10px">
							<div style="text-align:center; margin:auto" class="form-group col-md-5">
								<label class="font-settings" asp-for="SearchTerm"></label>
								<input asp-for="SearchTerm" class="form-control" placeholder="Enter food name...">
							</div>
							<div style="text-align:center; margin:auto" class="form-group col-md-4">
								<label class="font-settings" asp-for="Sorting"></label>
								<select asp-for="Sorting" class="form-control">
									<option value="0" selected>Calories</option>
									<option value="1">Proteins</option>
									<option value="2">Fats</option>
									<option value="3">Carbohydrates</option>
								</select>
							</div>
							<div class="form-group col-md-3" style="margin:auto; margin-top:30px">
								<input type="submit" class="btn btn-settings font-settings" value="Search">
							</div>
						</div>
					</form>

					<div class="text-box" style="padding:10px 5px 10px 5px">
						<table class="table">
							<thead class="thead-light">
								<tr style="text-align:center">
									<th style="color:black; width:25%">Picture</th>
									<th style="color:black; float:right">Calories</th>
									<th style="color:black">Proteins</th>
									<th style="color:black">Fats</th>
									<th style="color:black">Carbs</th>
									<th style="color:black; float:right ; white-space: nowrap">Add to</th>
								</tr>
							</thead>
							<tbody>
								@foreach (var food in Model.Foods)
								{

									<tr style="text-align:center">
										<td style="height:35%; width:25%; vertical-align:middle"><a><img src="@food.PictureUrl" class="card-img-bottom"></a></td>
										<td style="vertical-align:middle">@food.Calories</td>
										<td style="vertical-align:middle">@food.Proteins</td>
										<td style="vertical-align:middle">@food.Fats</td>
										<td style="vertical-align:middle">@food.Carbohydrates</td>
										<td style="vertical-align:middle">
											<a asp-controller="Diet" asp-action="AddBreakfast" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Balanced" class="btn btn-settings btn-extra float-right ml-3">Breakfast</a>
											<a asp-controller="Diet" asp-action="AddLunch" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Balanced" class="btn btn-settings btn-extra float-right ml-3">Lunch</a>
											<a asp-controller="Diet" asp-action="AddDinner" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Balanced" class="btn btn-settings btn-extra float-right ml-3">Dinner</a>
										</td>
									</tr>
								}
							</tbody>
						</table>

						@{
							var previousPage = Model.CurrentPage - 1;
							if (previousPage < 1)
							{
								previousPage = 1;
							}

							var maxPage = Math.Ceiling((double)Model.TotalFoods / DietFormModel.FoodsPerPage);
						}

						<div class="row">
							<div class="col-md-6">
								<a class="btn btn-settings @(Model.CurrentPage == 1 ? "disabled" : string.Empty)"
								   asp-controller="Diet"
								   asp-action="Balanced"
								   asp-route-currentPage="@previousPage"
								   asp-route-searchTerm="@Model.SearchTerm"
								   asp-route-sorting="@((int)Model.Sorting)"><<</a>
							</div>

							@{
								var shouldButtonBeDisabled = Model.CurrentPage == maxPage ||
			!Model.Foods.Any();
							}

							<div class="col-md-6">
								<a class="btn btn-settings float-sm-right @(shouldButtonBeDisabled ? "disabled" : string.Empty)"
								   asp-controller="Diet"
								   asp-action="Balanced"
								   asp-route-currentPage="@(Model.CurrentPage + 1)"
								   asp-route-searchTerm="@Model.SearchTerm"
								   asp-route-sorting="@((int)Model.Sorting)">>></a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</body>