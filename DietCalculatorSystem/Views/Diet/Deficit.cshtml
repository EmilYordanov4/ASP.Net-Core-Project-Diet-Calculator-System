@model DietFormModel

@{
    ViewData["Title"] = "Deficit";
}

<html>
<head>
	<title>Test Split Screen</title>

	<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
	<link rel="stylesheet" href="~/css/site.css" />
</head>
<body>
	<div class="row">
		<div class="col-lg-7 no-gutters">
			<div>
				<h3 style="text-align:center">Total</h3>
				<table class="table">
					<thead class="thead-light">
						<tr style="text-align:center">
							<th scope="col">Calories</th>
							<th scope="col">Proteins</th>
							<th scope="col">Fats</th>
							<th scope="col">Carbohydrates</th>
						</tr>
					</thead>
					<tbody>
						<tr style="text-align:center">
							<td>@Model.TotalCalories</td>
							<td>@Model.TotalProteins</td>
							<td>@Model.TotalFats</td>
							<td>@Model.TotalCarbohydrates</td>
						</tr>
				</table>
				<h3 style="text-align:center">Breakfast</h3>
				<table class="table">
					<thead class="thead-light">
						<tr style="text-align:center">
							<th scope="col">Name</th>
							<th scope="col">Calories</th>
							<th scope="col">Proteins</th>
							<th scope="col">Fats</th>
							<th scope="col">Carbs</th>
							<th scope="col">Quantity</th>
							<th scope="col"></th>
						</tr>
					</thead>
					<tbody>
						@foreach (var food in @Model.BreakfastFoods)
						{
							<tr style="text-align:center">
								<td>@food.Name</td>
								<td>@food.Calories</td>
								<td>@food.Proteins</td>
								<td>@food.Fats</td>
								<td>@food.Carbohydrates</td>
								<td>@food.Quantity</td>
								<td>
									<a asp-controller="Diet" asp-action="RemoveBreakfast" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Deficit" class="btn btn-danger float-right ml-3">Remove</a>
								</td>
							</tr>
						}
				</table>
				<h3 style="text-align:center">Lunch</h3>
				<table class="table">
					<thead class="thead-light">
						<tr style="text-align:center">
							<th scope="col">Name</th>
							<th scope="col">Calories</th>
							<th scope="col">Proteins</th>
							<th scope="col">Fats</th>
							<th scope="col">Carbs</th>
							<th scope="col">Quantity</th>
							<th scope="col"></th>
						</tr>
					</thead>
					<tbody>
						@foreach (var food in @Model.LunchFoods)
						{
							<tr style="text-align:center">
								<td>@food.Name</td>
								<td>@food.Calories</td>
								<td>@food.Proteins</td>
								<td>@food.Fats</td>
								<td>@food.Carbohydrates</td>
								<td>@food.Quantity</td>
								<td>
									<a asp-controller="Diet" asp-action="RemoveLunch" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Deficit" class="btn btn-danger float-right ml-3">Remove</a>
								</td>
							</tr>
						}
				</table>
				<h3 style="text-align:center">Dinner</h3>
				<table class="table">
					<thead class="thead-light">
						<tr style="text-align:center">
							<th scope="col">Name</th>
							<th scope="col">Calories</th>
							<th scope="col">Proteins</th>
							<th scope="col">Fats</th>
							<th scope="col">Carbs</th>
							<th scope="col">Quantity</th>
							<th scope="col"></th>
						</tr>
					</thead>
					<tbody>
						@foreach (var food in @Model.DinnerFoods)
						{
							<tr style="text-align:center">
								<td>@food.Name</td>
								<td>@food.Calories</td>
								<td>@food.Proteins</td>
								<td>@food.Fats</td>
								<td>@food.Carbohydrates</td>
								<td>@food.Quantity</td>
								<td>
									<a asp-controller="Diet" asp-action="RemoveDinner" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Deficit" class="btn btn-danger float-right ml-3">Remove</a>
								</td>
							</tr>
						}
				</table>
			</div>
		</div>
		<div class="col-lg-5 no-gutters" >
			<div class="sidebar">
				<div>
					<form method="get">
						<div class="row" mb-5>
							<div style="text-align:center" class="form-group col-md-3">
								<label asp-for="SearchTerm"></label>
								<input asp-for="SearchTerm" class="form-control" placeholder="Enter food name...">
							</div>
							<div style="text-align:center" class="form-group col-md-4">
								<div class="form-group">
									<label asp-for="Sorting"></label>
									<select asp-for="Sorting" class="form-control">
										<option value="0" selected>Calories</option>
										<option value="1">Proteins</option>
										<option value="2">Fats</option>
										<option value="3">Carbohydrates</option>
									</select>
								</div>
							</div>
							<div class="form-group col-md-3">
								<input type="submit" class="btn btn-primary" value="Search">
							</div>
						</div>
					</form>

					<div>
						<table class="thead-light">
							<tr style="text-align:center">
								<th scope="col">Picture</th>
								<th scope="col">Calories</th>
								<th scope="col">Proteins</th>
								<th scope="col">Fats</th>
								<th scope="col">Carbohydrates</th>
								<th scope="col"></th>
							</tr>
							@foreach (var food in Model.Foods)
							{

								<tr style="text-align:center">
									<td style="height:25%; width:25%"><a><img src="@food.PictureUrl" class="card-img-bottom"></a></td>
									<td>@food.Calories</td>
									<td>@food.Proteins</td>
									<td>@food.Fats</td>
									<td>@food.Carbohydrates</td>
									<td>
										<a asp-controller="Diet" asp-action="AddBreakfast" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Deficit" class="btn btn-danger float-right ml-3">Breakfast</a>
										<a asp-controller="Diet" asp-action="AddLunch" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Deficit" class="btn btn-danger float-right ml-3">Lunch</a>
										<a asp-controller="Diet" asp-action="AddDinner" asp-route-foodId="@food.Id" asp-route-dietId="@Model.DietId" asp-route-dietType="Deficit" class="btn btn-danger float-right ml-3">Dinner</a>
									</td>
								</tr>
							}
						</table>
					</div>

					@{
						var previousPage = Model.CurrentPage - 1;
						if (previousPage < 1)
						{
							previousPage = 1;
						}

						var maxPage = Math.Ceiling((double)Model.TotalFoods / DietFormModel.FoodsPerPage);
					}

					<div class="row mb-5">
						<div class="col-md-6">
							<a class="btn btn-primary @(Model.CurrentPage == 1 ? "disabled" : string.Empty)"
							   asp-controller="Diet"
							   asp-action="Balanced"
							   asp-route-currentPage="@previousPage"
							   asp-route-searchTerm="@Model.SearchTerm"
							   asp-route-sorting="@((int)Model.Sorting)"><<</a>
						</div>

						@{
							var shouldButtonBeDisabled = Model.CurrentPage == maxPage ||
			!Model.Foods.Any();
						}

						<div class="col-md-6">
							<a class="btn btn-primary float-sm-right @(shouldButtonBeDisabled ? "disabled" : string.Empty)" style="margin-top: 10px"
							   asp-controller="Diet"
							   asp-action="Balanced"
							   asp-route-currentPage="@(Model.CurrentPage + 1)"
							   asp-route-searchTerm="@Model.SearchTerm"
							   asp-route-sorting="@((int)Model.Sorting)">>></a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</body>
</html>